/*!

=========================================================
* Now UI Kit PRO React - v1.0.0
=========================================================

* Product Page: https://www.creative-tim.com/product/now-ui-kit-pro-react
* Copyright 2019 Creative Tim (http://www.creative-tim.com)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

*/
(this["webpackJsonpmaterial-kit-pro-react"]=this["webpackJsonpmaterial-kit-pro-react"]||[]).push([[18],{333:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return j}));var n=a(2),c=a.n(n),r=a(199),o=a(241),s=a.n(o),i=a(334),l=a.n(i),u=a(335),f=a.n(u),b={fontSize:"0.7rem"},O=function(e){var t=new Date(e),a=m(t.getHours()),n=m(t.getMinutes()),c=Date.now(),r=parseInt(c-e,10)/1e3/60,o=r/60;return r<=60?"".concat(a,":").concat(n):r>60&&o<=24||o>24?"".concat(a,":").concat(n," ----- ").concat(t.toDateString()):r},m=function(e){var t=e.toString();return 1===t.length?"0".concat(t):t},j=function(e){return e===r.b?l.a:e===r.a?f.a:s.a},g=function(e){return e.user===r.b?c.a.createElement("span",{style:b},"Karen ",c.a.createElement("small",null,"\xb7 ",O(e.createOn)," ")):e.user===r.a?c.a.createElement("span",{style:b},"Kevin ",c.a.createElement("small",null,"\xb7 ",O(e.createOn))):c.a.createElement(c.a.Fragment,null)}},334:function(e,t,a){e.exports=a.p+"static/media/gloria2.666943cf.jpg"},335:function(e,t,a){e.exports=a.p+"static/media/jerry.2aa27bf0.jpg"},834:function(e,t,a){"use strict";a.r(t);var n=a(19),c=a(123),r=a.n(c),o=a(2),s=a.n(o),i=a(53),l=a(20),u=a(40),f=a(118),b=a(85),O=a(86),m=a(336),j=a(332),g=a(333),v=a(91),d=a(227),p=a(76),E=a(94),h=a(25),y=(a(55),a(248)),S=Object(f.a)(d.a);t.default=Object(l.f)((function(e){e.history;var t=S(),a=Object(i.useSelector)((function(e){return e.login})).user,c=Object(o.useState)(void 0),l=Object(n.a)(c,2),f=l[0],d=l[1],k=Object(o.useState)(""),w=Object(n.a)(k,2),x=w[0],D=w[1],I=Object(o.useState)(""),M=Object(n.a)(I,2),U=M[0],J=M[1],K=Object(i.useSelector)((function(e){return e.chat})).maxMessageNumber,N=Object(o.useState)(!1),R=Object(n.a)(N,2),z=R[0],B=R[1],C=Object(o.useState)(""),F=Object(n.a)(C,2),H=F[0],q=F[1];Object(o.useEffect)((function(){if(u.c&&void 0!==K){var e=Object(h.f)(u.c,Object(h.c)(K));Object(h.d)(e,(function(e){A(e)}))}}),[K]),Object(o.useEffect)((function(){if(a&&U&&""!==U){var e={user:a,message:"".concat(U),createOn:Date.now()},t={};t[Object(h.e)(Object(h.a)(Object(h.g)(u.d),"chatMsg")).key]=e,Object(h.i)(u.c,t).then((function(){})).catch((function(e){console.log(e.message),q(e.message),B(!0)}))}}),[U]);var A=function(e){var t=e.val();if(null!==t&&void 0!==t){var n=r.a.slice(r.a.values(t),-K);n.forEach((function(e){var a=r.a.pickBy(t,(function(t,a){return t.createOn===e.createOn}));if(a){var n=Object.keys(a)[0];e.id=n}}));var c=r.a.slice(r.a.values(n),-1)[0].user;r.a.slice(r.a.values(n),-1)[0].createOn;a===c?(D(""),d(n)):d(n)}},G=function(e,t){try{if(e)window.confirm("\u662f\u5426\u522a\u9664?")&&Object(h.h)(Object(h.a)(Object(h.g)(u.d),"chatMsg/".concat(e))),t&&clearInterval(t);else console.log("msgId not exist")}catch(a){console.log(a)}};return s.a.createElement("div",{className:t.section},s.a.createElement(b.a,{justify:"center"},s.a.createElement(O.a,{xs:12,sm:8,md:8},s.a.createElement("div",null,f?f.map((function(e,t){return s.a.createElement(m.a,{key:void 0!==e.id?e.id:t,avatar:Object(g.a)(e.user),title:Object(g.b)(e),message:e.message,id:e.id,event:G})})):s.a.createElement("div",null),s.a.createElement(j.a,{avatar:Object(g.a)(a),value:x,onChange:function(e){D(e.target.value)},onReply:function(e){if(a&&""!==x){var t={user:a,message:x,createOn:Date.now()},n={};n[Object(h.e)(Object(h.a)(Object(h.g)(u.d),"chatMsg")).key]=t,Object(h.i)(u.c,n).then((function(){B(!1)})).catch((function(e){console.log("\u8a0a\u606f\u7121\u6cd5\u9001\u51fa"),console.log(e.message),q("\u8a0a\u606f\u7121\u6cd5\u9001\u51fa"),B(!0)}))}},onUpdate:function(e){if(a){var t=K+1;Object(p.a)(E.a,t)}},enableUpdate:!0,setReplyImageUrl:J,enableImageUpload:!0})))),s.a.createElement(v.a,null),s.a.createElement(y.a,{enable:z,setEnable:B,title:"Error...",message:H}))}))}}]);
//# sourceMappingURL=18.a6f3a672.chunk.js.map