/*!

=========================================================
* Now UI Kit PRO React - v1.0.0
=========================================================

* Product Page: https://www.creative-tim.com/product/now-ui-kit-pro-react
* Copyright 2019 Creative Tim (http://www.creative-tim.com)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

*/
(this["webpackJsonpmaterial-kit-pro-react"]=this["webpackJsonpmaterial-kit-pro-react"]||[]).push([[18],{344:function(e,t,a){"use strict";a.d(t,"b",(function(){return j})),a.d(t,"a",(function(){return g}));var n=a(2),c=a.n(n),r=a(196),o=a(247),s=a.n(o),i=a(345),l=a.n(i),u=a(346),f=a.n(u),b={fontSize:"0.7rem"},m=function(e){var t=new Date(e),a=O(t.getHours()),n=O(t.getMinutes()),c=Date.now(),r=parseInt(c-e,10)/1e3/60,o=r/60;return r<=60?"".concat(a,":").concat(n):r>60&&o<=24||o>24?"".concat(a,":").concat(n," ----- ").concat(t.toDateString()):r},O=function(e){var t=e.toString();return 1===t.length?"0".concat(t):t},g=function(e){return e===r.b?l.a:e===r.a?f.a:s.a},j=function(e){return e.user===r.b?c.a.createElement("span",{style:b},"Karen ",c.a.createElement("small",null,"\xb7 ",m(e.createOn)," ")):e.user===r.a?c.a.createElement("span",{style:b},"Kevin ",c.a.createElement("small",null,"\xb7 ",m(e.createOn))):c.a.createElement(c.a.Fragment,null)}},345:function(e,t,a){e.exports=a.p+"static/media/gloria2.666943cf.jpg"},346:function(e,t,a){e.exports=a.p+"static/media/jerry.2aa27bf0.jpg"},839:function(e,t,a){"use strict";a.r(t);var n=a(22),c=a(127),r=a.n(c),o=a(2),s=a.n(o),i=a(56),l=a(23),u=a(44),f=a(123),b=a(90),m=a(91),O=a(347),g=a(343),j=a(344),v=a(95),d=a(233),p=a(80),h=a(98),E=a(28),y=(a(57),a(289)),k=(a(290),Object(f.a)(d.a));t.default=Object(l.f)((function(e){e.history;var t=k(),a=Object(i.useSelector)((function(e){return e.login})).user,c=Object(o.useState)(void 0),l=Object(n.a)(c,2),f=l[0],d=l[1],w=Object(o.useState)(""),S=Object(n.a)(w,2),I=S[0],x=S[1],D=Object(o.useState)(""),M=Object(n.a)(D,2),U=M[0],C=M[1],R=Object(i.useSelector)((function(e){return e.chat})).maxMessageNumber;Object(o.useEffect)((function(){if(u.c&&void 0!==R){var e=Object(E.f)(u.c,Object(E.c)(R));Object(E.d)(e,(function(e){B(e)}))}}),[R]),Object(o.useEffect)((function(){if(a&&U&&""!==U){var e={user:a,message:"".concat(U),createOn:Date.now()},t={};t[Object(E.e)(Object(E.a)(Object(E.g)(u.d),"chatMsg")).key]=e,Object(E.i)(u.c,t).then((function(){})).catch((function(e){console.log(e.message),y.b.error("replyImageUrl update error : ".concat(e.message))}))}}),[U]);var B=function(e){var t=e.val();if(null!==t&&void 0!==t){var n=r.a.slice(r.a.values(t),-R);n.forEach((function(e){var a=r.a.pickBy(t,(function(t,a){return t.createOn===e.createOn}));if(a){var n=Object.keys(a)[0];e.id=n}}));var c=r.a.slice(r.a.values(n),-1)[0].user;r.a.slice(r.a.values(n),-1)[0].createOn;a===c?(x(""),d(n)):d(n)}},F=function(e,t){try{if(e)window.confirm("\u662f\u5426\u522a\u9664?")&&Object(E.h)(Object(E.a)(Object(E.g)(u.d),"chatMsg/".concat(e))),t&&clearInterval(t);else console.log("msgId not exist")}catch(a){console.log(a)}};return s.a.createElement("div",{className:t.section},s.a.createElement(b.a,{justify:"center"},s.a.createElement(m.a,{xs:12,sm:8,md:8},s.a.createElement("div",null,f?f.map((function(e,t){return s.a.createElement(O.a,{key:void 0!==e.id?e.id:t,avatar:Object(j.a)(e.user),title:Object(j.b)(e),message:e.message,id:e.id,event:F})})):s.a.createElement("div",null),s.a.createElement(g.a,{avatar:Object(j.a)(a),value:I,onChange:function(e){x(e.target.value)},onReply:function(e){if(a&&""!==I){var t={user:a,message:I,createOn:Date.now()},n={};n[Object(E.e)(Object(E.a)(Object(E.g)(u.d),"chatMsg")).key]=t,Object(E.i)(u.c,n).then((function(){})).catch((function(e){console.log("\u8a0a\u606f\u7121\u6cd5\u9001\u51fa"),console.log(e.message),y.b.error("onReplyClick error : ".concat(e.message))}))}},onUpdate:function(e){if(a){var t=R+1;Object(p.a)(h.a,t)}},enableUpdate:!0,setReplyImageUrl:C,enableImageUpload:!0})))),s.a.createElement(v.a,null),s.a.createElement(y.a,{theme:"dark",position:"bottom-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))}))}}]);
//# sourceMappingURL=18.8a58911a.chunk.js.map