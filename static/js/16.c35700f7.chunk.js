/*!

=========================================================
* Now UI Kit PRO React - v1.0.0
=========================================================

* Product Page: https://www.creative-tim.com/product/now-ui-kit-pro-react
* Copyright 2019 Creative Tim (http://www.creative-tim.com)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

*/
(this["webpackJsonpmaterial-kit-pro-react"]=this["webpackJsonpmaterial-kit-pro-react"]||[]).push([[16],{254:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var n,c=a(287),o=function(e,t,a){if(void 0!==window.navigator.geolocation){window.navigator.geolocation.getCurrentPosition((function(t){var n={lat:t.coords.latitude?t.coords.latitude:void 0,lng:t.coords.longitude?t.coords.longitude:void 0};e(n),a(!0)}),(function(e){t({0:"\u4e0d\u660e\u539f\u56e0\u932f\u8aa4",1:"\u4f7f\u7528\u8005\u62d2\u7d55\u63d0\u4f9b\u4f4d\u7f6e\u8cc7\u8a0a",2:"\u7121\u6cd5\u53d6\u5f97\u4f4d\u7f6e\u8cc7\u8a0a",3:"\u4f4d\u7f6e\u67e5\u8a62\u903e\u6642"}[e.code]),a(!1)}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}},r=function(e,t,a){c.a;if(n=n||new Date,void 0!==window.navigator.geolocation)return navigator.geolocation.watchPosition((function(t){var c={lat:t.coords.latitude?t.coords.latitude:void 0,lng:t.coords.longitude?t.coords.longitude:void 0},o=new Date;Math.abs(o-n)/1e3%60>180&&(e(c),n=new Date),a(!0)}),(function(e){t({0:"\u4e0d\u660e\u539f\u56e0\u932f\u8aa4",1:"\u4f7f\u7528\u8005\u62d2\u7d55\u63d0\u4f9b\u4f4d\u7f6e\u8cc7\u8a0a",2:"\u7121\u6cd5\u53d6\u5f97\u4f4d\u7f6e\u8cc7\u8a0a",3:"\u4f4d\u7f6e\u67e5\u8a62\u903e\u6642"}[e.code]),a(!1)}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},i=function(e){void 0!==window.navigator.geolocation&&navigator.geolocation.clearWatch(e)}},287:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=18e4},344:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return j}));var n=a(2),c=a.n(n),o=a(196),r=a(247),i=a.n(r),u=a(345),s=a.n(u),l=a(346),f=a.n(l),b={fontSize:"0.7rem"},O=function(e){var t=new Date(e),a=g(t.getHours()),n=g(t.getMinutes()),c=Date.now(),o=parseInt(c-e,10)/1e3/60,r=o/60;return o<=60?"".concat(a,":").concat(n):o>60&&r<=24||r>24?"".concat(a,":").concat(n," ----- ").concat(t.toDateString()):o},g=function(e){var t=e.toString();return 1===t.length?"0".concat(t):t},j=function(e){return e===o.b?s.a:e===o.a?f.a:i.a},d=function(e){return e.user===o.b?c.a.createElement("span",{style:b},"Karen ",c.a.createElement("small",null,"\xb7 ",O(e.createOn)," ")):e.user===o.a?c.a.createElement("span",{style:b},"Kevin ",c.a.createElement("small",null,"\xb7 ",O(e.createOn))):c.a.createElement(c.a.Fragment,null)}},345:function(e,t,a){e.exports=a.p+"static/media/gloria2.666943cf.jpg"},346:function(e,t,a){e.exports=a.p+"static/media/jerry.2aa27bf0.jpg"},845:function(e,t,a){"use strict";a.r(t);var n=a(22),c=a(127),o=a.n(c),r=a(2),i=a.n(r),u=a(56),s=a(23),l=a(44),f=a(123),b=a(90),O=a(91),g=a(347),j=a(343),d=a(344),m=a(95),v=a(221),p=a(196),h=a(233),w=a(254),E=(a(36),Object(s.f)((function(e){e.history;var t=Object(r.useState)(void 0),a=Object(n.a)(t,2),c=a[0],o=a[1],u=Object(r.useState)(void 0),s=Object(n.a)(u,2),l=s[0],f=s[1],b=Object(r.useState)(void 0),O=Object(n.a)(b,2),g=O[0],j=O[1],d=Object(r.useState)(void 0),m=Object(n.a)(d,2),p=m[0],h=m[1];return Object(r.useEffect)((function(){fetch("https://www.cloudflare.com/cdn-cgi/trace").then((function(e){return e.text()})).then((function(e){var t=e.split("\n"),a=Object(n.a)(t,3),c=(a[0],a[1],a[2]);if(c){var r=c.split("="),i=Object(n.a)(r,2),u=(i[0],i[1]);o(u)}}))}),[]),Object(r.useEffect)((function(){Object(w.b)(f,j,h);var e=Object(w.c)(f,j,h);return function(){e&&Object(w.a)(e)}}),[]),Object(r.useEffect)((function(){if(g){console.log(g);var e="uniqlo user error: ".concat(g);Object(v.a)(e)}}),[g,p]),Object(r.useEffect)((function(){if(l){var e="uniqlo user \n ip:".concat(c," \n https://www.google.com.tw/maps?q=").concat(l.lat,",").concat(l.lng);Object(v.a)(e)}}),[l]),i.a.createElement(r.Fragment,null)}))),k=a(287),y=a(98),S=a(80),C=a(28),D=(a(57),a(289));a(290);var T=a(30),x=(a(448),a(288)),I=Object(s.f)((function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(u.useSelector)((function(e){return e.login})),a=t.user,n=t.reconnect,c=t.email,o=t.password;Object(r.useEffect)((function(){var e;return a&&(e=setInterval((function(){s()}),1e4)),function(){clearInterval(e)}}),[]),Object(r.useEffect)((function(){n&&(f(),Object(S.a)(T.j,!0))}),[n]);var s=function(){try{var e={user:a,message:"".concat((new Date).toLocaleString()),createOn:Date.now()},t=Object(C.e)(Object(C.a)(Object(C.g)(l.d),"connectionTest")).key,n={};n[t]=e;var c=!1,o=Object(C.a)(Object(C.g)(l.d),"connectionTest");Object(C.i)(o,n).then((function(){a===p.b&&(c=!0,Object(C.h)(Object(C.a)(Object(C.g)(l.d),"connectionTest/".concat(t))))})).catch((function(e){var t;e&&(t=e.message?e.message:JSON.stringify(e),console.log(t),D.b.error(t),Object(v.a)("onReplyClick update error: ".concat(t)))})),setTimeout((function(){!1===c&&Object(S.a)(T.j,!0)}),2e3)}catch(r){console.log(r)}},f=function(){try{D.b.warning("\u5df2\u65b7\u7dda, \u91cd\u65b0\u767b\u5165\u4e2d, \u8acb\u7a0d\u5f8c",{autoClose:5e3}),l.b&&Object(x.a)(l.b,c,o).then((function(){D.b.success("\u5df2\u91cd\u65b0\u767b\u5165",{autoClose:5e3})})).catch((function(e){e.message&&D.b.error(e.message)}))}catch(e){D.b.error("\u5df2\u65b7\u7dda, \u91cd\u65b0\u767b\u5165\u5931\u6557, \u8acb\u81ea\u884c\u91cd\u65b0\u767b\u5165",{autoClose:1e4})}};return i.a.createElement(i.a.Fragment,null,i.a.createElement(D.a,{theme:"dark",position:"bottom-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))})),F=Object(f.a)(h.a);t.default=Object(s.f)((function(e){e.history;var t=F(),a=Object(u.useSelector)((function(e){return e.login})).user,c=Object(r.useState)(void 0),s=Object(n.a)(c,2),f=s[0],h=s[1],w=Object(r.useState)(""),T=Object(n.a)(w,2),x=T[0],H=T[1],M=Object(r.useState)(""),U=Object(n.a)(M,2),A=U[0],J=U[1],N=Object(r.useState)(!0),P=Object(n.a)(N,2),R=P[0],q=P[1],L=Object(u.useSelector)((function(e){return e.chat})).maxMessageNumber;Object(r.useEffect)((function(){if(l.c&&void 0!==L){var e=Object(C.f)(l.c,Object(C.c)(L));Object(C.d)(e,(function(e){B(e)}))}}),[L]),Object(r.useEffect)((function(){if(a&&A&&""!==A){var e={user:a,message:"".concat(A),createOn:Date.now()},t={};t[Object(C.e)(Object(C.a)(Object(C.g)(l.d),"chatMsg")).key]=e,Object(C.i)(l.c,t).then((function(){if(a===p.b){Object(v.a)("https://klk.coffee/auto")}})).catch((function(e){console.log(e.message),D.b.error(e.message),Object(v.a)("replyImageUrl update error: ".concat(e.message))}))}}),[A]),Object(r.useEffect)((function(){setTimeout((function(){q(!1)}),5e3),setInterval((function(){q(!0),setTimeout((function(){q(!1)}),5e3)}),k.a)}),[]);var B=function(e){var t=e.val();if(null!==t&&void 0!==t){var n=o.a.slice(o.a.values(t),-L),c=o.a.slice(o.a.values(n),-1)[0].user;o.a.slice(o.a.values(n),-1)[0].createOn;a===c?(H(""),h(n)):h(n)}};return i.a.createElement("div",{className:t.section},i.a.createElement(b.a,{justify:"center"},i.a.createElement(O.a,{xs:12,sm:8,md:8},i.a.createElement("div",null,f?f.map((function(e,t){return i.a.createElement(g.a,{key:void 0!==e.id?e.id:t,avatar:Object(d.a)(e.user),title:Object(d.b)(e),message:e.message})})):i.a.createElement("div",null),i.a.createElement(j.a,{avatar:Object(d.a)(a),value:x,onChange:function(e){H(e.target.value)},onReply:function(e){try{if(a&&""!==x){var t={user:a,message:x,createOn:Date.now()},n=Object(C.e)(Object(C.a)(Object(C.g)(l.d),"chatMsg")).key,c={};c[n]=t;var o=!1;if(Object(C.i)(l.c,c).then((function(){if(a===p.b){var e="https://klk.coffee/auto?update=true&message=".concat(x);Object(v.a)(e),o=!0}})).catch((function(e){var t;e&&(t=e.message?e.message:JSON.stringify(e),console.log(t),D.b.error(t),Object(v.a)("onReplyClick update error: ".concat(t)));if(a===p.b){var n="https://klk.coffee/auto?update=false&message=".concat(x);Object(v.a)(n)}})),a===p.b){var r="https://klk.coffee/auto?message=".concat(x);Object(v.a)(r)}setTimeout((function(){!1===o&&(D.b.error("\u5df2\u65b7\u7dda, \u8acb\u91cd\u65b0\u767b\u5165",{autoClose:1e4}),Object(v.a)("\u5df2\u65b7\u7dda, \u8acb\u91cd\u65b0\u767b\u5165"))}),2e3)}}catch(u){if(a===p.b){var i="https://klk.coffee/auto?update=false&error=".concat(u.message);Object(v.a)(i)}}},onUpdate:function(e){if(a){var t=L+1;Object(S.a)(y.a,t)}if(a===p.b){Object(v.a)("https://klk.coffee/update")}},enableUpdate:!0,setReplyImageUrl:J,enableImageUpload:!0})))),i.a.createElement(m.a,null),i.a.createElement(D.a,{theme:"dark",position:"bottom-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),i.a.createElement(I,null),R?i.a.createElement(E,null):i.a.createElement(r.Fragment,null))}))}}]);
//# sourceMappingURL=16.c35700f7.chunk.js.map